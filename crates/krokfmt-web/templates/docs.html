{% extends "base.html" %}

{% block title %}krokfmt Documentation{% endblock %}

{% block content %}
<div class="container">
    <h1>üêä krokfmt Documentation</h1>
    
    <section>
        <h2>Installation</h2>
        <h3>Using Cargo</h3>
        <div class="code-example">
            <code>cargo install krokfmt</code>
        </div>
        
        <h3>Pre-built Binaries</h3>
        <p>Download pre-built binaries for your platform from the <a href="https://github.com/skeswa/krokfmt/releases">GitHub Releases</a> page.</p>
    </section>
    
    <section>
        <h2>Usage</h2>
        
        <h3>Basic Usage</h3>
        <div class="code-example">
            <code># Format a single file
krokfmt src/app.ts

# Format all TypeScript files in a directory
krokfmt src/

# Format files matching a glob pattern
krokfmt "src/**/*.{ts,tsx}"

# Format multiple files
krokfmt file1.ts file2.tsx src/components/</code>
        </div>
        
        <h3>Check Mode (CI/CD)</h3>
        <p>Use check mode to verify files are formatted without modifying them. Perfect for CI pipelines:</p>
        <div class="code-example">
            <code>krokfmt --check src/</code>
        </div>
        <p>Returns exit code 1 if any files need formatting.</p>
        
        <h3>Preview Mode</h3>
        <p>Print formatted output to stdout without modifying files:</p>
        <div class="code-example">
            <code>krokfmt --stdout file.ts</code>
        </div>
        
        <h3>Skip Backups</h3>
        <p>By default, krokfmt creates backup files before formatting. Skip this with:</p>
        <div class="code-example">
            <code>krokfmt --no-backup src/</code>
        </div>
    </section>
    
    <section>
        <h2>Formatting Rules</h2>
        
        <h3>Import Organization</h3>
        <p>Imports are automatically organized into three groups:</p>
        <ol>
            <li><strong>External packages</strong> (from node_modules)</li>
            <li><strong>Absolute imports</strong> (starting with @ or ~)</li>
            <li><strong>Relative imports</strong> (starting with ./ or ../)</li>
        </ol>
        <p>Within each group, imports are sorted alphabetically.</p>
        
        <h3>Member Ordering</h3>
        <p>Class members and module declarations are ordered by visibility:</p>
        <ol>
            <li>Exported members</li>
            <li>Public members</li>
            <li>Protected members</li>
            <li>Private members</li>
        </ol>
        
        <h3>Alphabetical Sorting</h3>
        <p>The following are automatically sorted alphabetically:</p>
        <ul>
            <li>Object properties</li>
            <li>Interface members</li>
            <li>Type union/intersection members</li>
            <li>Enum members (string enums only)</li>
            <li>JSX props</li>
            <li>Function parameters (destructured objects)</li>
        </ul>
        
        <h3>Comment Preservation</h3>
        <p>All comments are preserved in their semantic positions:</p>
        <ul>
            <li>Inline comments within expressions</li>
            <li>Leading comments before declarations</li>
            <li>Trailing comments at end of lines</li>
            <li>JSDoc comments</li>
            <li>Standalone comments with surrounding blank lines</li>
        </ul>
    </section>
    
    <section>
        <h2>Editor Integration</h2>
        
        <h3>VS Code</h3>
        <p>Add to your <code>.vscode/settings.json</code>:</p>
        <div class="code-example">
            <code>{
    "editor.formatOnSave": true,
    "[typescript]": {
        "editor.defaultFormatter": "krokfmt"
    },
    "[typescriptreact]": {
        "editor.defaultFormatter": "krokfmt"
    }
}</code>
        </div>
        
        <h3>Pre-commit Hook</h3>
        <p>Add to your <code>.git/hooks/pre-commit</code>:</p>
        <div class="code-example">
            <code>#!/bin/sh
krokfmt --check src/ || {
    echo "Please run 'krokfmt src/' before committing"
    exit 1
}</code>
        </div>
        
        <h3>GitHub Actions</h3>
        <div class="code-example">
            <code>name: Format Check
on: [push, pull_request]
jobs:
  format:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install krokfmt
        run: cargo install krokfmt
      - name: Check formatting
        run: krokfmt --check src/</code>
        </div>
    </section>
    
    <section>
        <h2>Philosophy</h2>
        <p>krokfmt is intentionally opinionated with zero configuration options. This eliminates:</p>
        <ul>
            <li>Debates about formatting preferences</li>
            <li>Time spent configuring formatters</li>
            <li>Inconsistencies across projects</li>
            <li>Merge conflicts from formatting changes</li>
        </ul>
        
        <p>The formatter is designed for the AI era, making generated code more readable and maintainable by enforcing consistent organization patterns.</p>
    </section>
    
    <section>
        <h2>Comparison with Other Formatters</h2>
        <table style="width: 100%; margin: 2rem 0;">
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>krokfmt</th>
                    <th>Prettier</th>
                    <th>Biome</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Import Organization</td>
                    <td>‚úÖ Built-in</td>
                    <td>‚ùå Plugin required</td>
                    <td>‚úÖ Built-in</td>
                </tr>
                <tr>
                    <td>Property Sorting</td>
                    <td>‚úÖ Automatic</td>
                    <td>‚ùå Not supported</td>
                    <td>‚ùå Not supported</td>
                </tr>
                <tr>
                    <td>Zero Config</td>
                    <td>‚úÖ No options</td>
                    <td>‚ö†Ô∏è Many options</td>
                    <td>‚ö†Ô∏è Configurable</td>
                </tr>
                <tr>
                    <td>Performance</td>
                    <td>‚ö° Very fast (Rust)</td>
                    <td>üöÄ Fast (JS)</td>
                    <td>‚ö° Very fast (Rust)</td>
                </tr>
                <tr>
                    <td>Comment Preservation</td>
                    <td>‚úÖ Advanced</td>
                    <td>‚úÖ Good</td>
                    <td>‚úÖ Good</td>
                </tr>
            </tbody>
        </table>
    </section>
</div>

<style>
    table {
        border-collapse: collapse;
        background: var(--lighter);
    }
    
    th, td {
        border: 1px solid var(--border);
        padding: 0.75rem;
        text-align: left;
    }
    
    th {
        background: var(--dark);
        color: white;
    }
    
    tr:nth-child(even) {
        background: var(--light);
    }
    
    section {
        margin: 3rem 0;
    }
    
    h2 {
        color: var(--dark);
        margin: 2rem 0 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid var(--border);
    }
    
    h3 {
        color: var(--primary);
        margin: 1.5rem 0 0.75rem;
    }
    
    ol, ul {
        margin-left: 2rem;
        line-height: 1.8;
    }
</style>
{% endblock %}